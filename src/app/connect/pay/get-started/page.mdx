import {
	OpenSourceCard,
	ArticleIconCard,
	Callout,
	DocImage,
	Stack,
	createMetadata,
} from "@doc";
import { GraduationCap } from "lucide-react";
import payApiKeyImage from "../assets/pay-api-key.png";

export const metadata = createMetadata({
	image: {
		title: "thirdweb Pay - Buy With Crypto - Get Started",
		icon: "pay",
	},
	title: "thirdweb Pay - Buy With Crypto | thirdweb",
	description:
		"Learn how to get a quote and send a transaction with the thirdweb SDK",
});

# Get Started

In this guide, we’ll walk you through getting a quote and sending a transaction. Once set up, your app will be able to provide crypto purchases for users.

## Using the Connect UI

Buy With Crypto comes by default with our Connect UI component. Follow [this guide](/react/v4/components/ConnectWallet) to integrate Connect into your application.

## Starting from existing project

Install the required packages:

```bash
npm install thirdweb
```

## Get your client ID

To start enabling buy with crypto in your applications you will need your client ID. You can get one for free on [your thirdweb dashboard](https://thirdweb.com/create-api-key).

## Enable Pay

Once you’ve received your client ID, you will need to enable Pay. You can do this by navigating to [Settings > API Keys](https://thirdweb.com/dashboard/settings/api-keys) in your dashboard. Once there, you can edit your API Key and toggle Pay to enable it.

<DocImage src={payApiKeyImage} />

## Getting a Quote

A quote is an object that contains the details around a transaction’s route, price, and approval status. Receiving a quote requires the following parameters:

- **fromAddress:** The address of the wallet initiating the transaction.
- **fromTokenAddress:** The contract address of the source token.
- **fromChainId**: The chain id of the source token.
- **toTokenAddress:** The contract address of the destination token.
- **toChainId:** The chain id of the destination token.
- **client**: A thirdweb client instance instantiated with your client ID.

```ts
import { getSwapRoute } from "thirdweb";

const getQuote = async ({
	fromAddress,
	fromChainId,
	toChainId,
	fromTokenAddress,
	toTokenAddress,
}) => {
	const quote = await getSwapRoute({
		fromAddress,
		fromChainId,
		toChainId,
		fromTokenAddress,
		toTokenAddress,
		client,
	});
	return quote;
};
```

## Sending a Transaction

Once you’ve retrieved the quote for your transaction, you can utilize the `sendSwap` function to initiate the transaction with the provided quote parameter:

```ts
import { sendSwap } from "thirdweb";
import { useActiveAccount } from "thirdweb/react";

const onSendTransaction = async (quote) => {
	// Retrieves connected wallet if it exists
	const { activeAccount } = useActiveAccount();

	// Ensure that a quote exists and your wallet is connected.
	if (quote && activeAccount) {
		try {
			// Execute swap based on passed quote
			const swapStatusParams = await sendSwap(activeAccount, quote);
		} catch (error) {
			console.error("Error sending transaction:", error);
		}
	}
};
```

And those are the basics! You’re ready to start buying with crypto.

## Next Steps

Head on over to our advanced guides to learn more about handling Pay transactions:

- [**Collect Fees**](/connect/pay/collect-fees)
- [**Poll For Transaction Status**](/connect/pay/poll-for-transaction-status)

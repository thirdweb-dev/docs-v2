import Image from "next/image";
import OverviewImage from "../../assets/airdrop-overview.png";
import DemoImage1 from "../../assets/airdrop-nfts-1.png";
import DemoImage2 from "../../assets/airdrop-nfts-2.png";
import DemoImage3 from "../../assets/airdrop-nfts-3.png";
import DemoImage4 from "../../assets/airdrop-nfts-4.png";

# Airdrop NFTs

Engine makes it effortless for any developer to airdrop NFTs at scale. You sponsor the gas so your users only need a wallet address!

> This guide references Polygon Mumbai testnet and NextJS but is applicable for any EVM chain and full-stack framework.

<Image
	src={OverviewImage}
	alt="Airdrop overview"
	className="max-w-[600px] mx-auto"
/>

## Prerequisites

- An Engine instance
- A [backend wallet](/infrastructure/engine/features/backend-wallets) with [MATIC on Mumbai](https://mumbaifaucet.com/)
- A deployed NFT contract that can be claimed by the backend wallet
- A client ID and secret key from the [API Keys page](https://thirdweb.com/dashboard/settings/api-keys)

## Frontend: Add Connect Wallet and Claim buttons

Use [`<ConnectWallet>`](/react/components/ConnectWallet) to prompt the user for their wallet. The **Claim** button calls `POST /api/claim`.

```tsx
export default function Home() {
	return (
		<ThirdwebProvider activeChain="mumbai" clientId="<thirdweb_client_id>">
			<ClaimPage />
		</ThirdwebProvider>
	);
}

function ClaimPage() {
	const userWalletAddress = useAddress();

	const onClick = async () => {
		await fetch("/api/claim", {
			method: "POST",
			body: JSON.stringify({ userWalletAddress }),
		});
		alert(`üéâ A reward has been sent to your wallet: ${userWalletAddress}`);
	};

	return (
		<main>
			<h2>Thank you for being a superfan! ‚ù§Ô∏è</h2>
			<ConnectWallet />
			{userWalletAddress && <button onClick={onClick}>Claim my reward</button>}
		</main>
	);
}
```

_Replace `<thirdweb_client_id>`_.

## Backend: Call Engine to mint an NFT

`POST /api/claim` calls Engine to mint an NFT to the user's wallet.

```tsx
export async function POST(request: Request) {
	const { userWalletAddress } = await request.json();

	await fetch(
		"<engine_url>/contract/mumbai/<nft_contract_address>/erc1155/mint-to",
		{
			method: "POST",
			headers: {
				"Content-Type": "application/json",
				Authorization: "Bearer <thirdweb_secret_key>",
				"x-backend-wallet-address": "<backend_wallet_address>",
			},
			body: JSON.stringify({
				receiver: userWalletAddress,
				metadataWithSupply: {
					metadata: {
						name: "Acme Inc. Superfan",
						description: "Created with thirdweb Engine",
						image:
							"ipfs://QmciR3WLJsf2BgzTSjbG5zCxsrEQ8PqsHK7JWGWsDSNo46/nft.png",
					},
					supply: "1",
				},
			}),
		},
	);

	return NextResponse.json({ message: "Success!" });
}
```

## Try it out!

Here‚Äôs what the user flow looks like.

The app prompts the user to connect their wallet.

<Image
	src={DemoImage1}
	alt="Initial page load"
	className="max-w-[600px] mx-auto"
/>

<Image
	src={DemoImage2}
	alt="The app prompts the user to connect their wallet"
	className="max-w-[600px] mx-auto"
/>

A user presses claim.

<Image
	src={DemoImage3}
	alt="A user presses claim"
	className="max-w-[600px] mx-auto"
/>

They'll receive the NFT in their wallet shortly!

<Image
	src={DemoImage3}
	alt="They'll receive the NFT in their wallet shortly"
	className="max-w-[600px] mx-auto"
/>

## Full code example

The code above is simplified for readability. [View the full source code &rarr;](https://github.com/thirdweb-example/engine-minting-api)
